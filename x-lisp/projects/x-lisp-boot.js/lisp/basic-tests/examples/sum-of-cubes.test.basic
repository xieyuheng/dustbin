(define-function _main
  (block entry
    (= n (literal 6))
    (= x (call (@function sum-of-cubes 1) n))
    (= expected (literal 441))
    (= ok (call (@primitive-function equal? 2) expected x))
    (assert ok)
    (return)))

(define-function sum-of-cubes
  (block entry
    (= n (argument 0))
    (= v0 (literal 1))
    (= v1 (literal 2))
    (= v2 (call (@primitive-function identity 1) n))
    (= v3 (call (@primitive-function iadd 2) v0 v2)) ; n + 1
    (= v4 (call (@primitive-function imul 2) v2 v3)) ; n(n+1)
    (= v5 (call (@primitive-function idiv 2) v4 v1)) ; n(n+1)/2
    (= v6 (call (@primitive-function imul 2) v5 v5)) ; (n(n+1)/2)^2
    (return v6)))
