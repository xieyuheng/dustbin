(export start)

(define-data message (string "Hello, World!\n"))
(define-space message.length 8)

(define-code start
  (block entry
    (movq (imm 14) (reg rax))
    (movq (reg rax) (label-deref (label message.length)))

    (movq (imm 1) (reg rax))
    (movq (imm 1) (reg rdi))
    (leaq (label-deref (label message)) (reg rsi))
    (movq (label-deref (label message.length)) (reg rdx))
    (syscall)
    (movq (imm 60) (reg rax))
    (movq (imm 0) (reg rdi))
    (syscall)))
